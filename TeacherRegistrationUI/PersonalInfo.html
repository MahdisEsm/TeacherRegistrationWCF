<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    <link href="Content/bootstrap-rtl.css" rel="stylesheet" />
    <script src="Scripts/jquery-3.0.0.min.js"></script>
    <script src="Scripts/bootstrap.bundle.js"></script>
    <link href="Content/font-awesome.css" rel="stylesheet" />
    <link href="Content/Css/SiteCss.css" rel="stylesheet" />
    <script src="Scripts/Site.js"></script>
    <title>PersonalInformation</title>
</head>
<body>
    <header class="d-felx justify-content-center">
        <nav class="navbar Sitenav w-75 mx-auto radius1rem shadow">
            <a class="navbar-brand font-weight-bold" href="#">
                <img src="Content/Image/logoYellow.png" width="70" height="70" class="d-inline-block align-center" alt="" loading="lazy">
                جذب مدرس دوره های تخصصی IT
            </a>
        </nav>
        <div class="w-75 mx-auto mt-3 text-center">
            <img src="Content/Image/FigmaProjectIcons/Person-blue.png" />
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3;"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <img src="Content/Image/FigmaProjectIcons/Education.png" style="opacity: 0.2;" />
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3;"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <img src="Content/Image/FigmaProjectIcons/Job.png" style="opacity: 0.2;" />
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3;"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <img src="Content/Image/FigmaProjectIcons/Teacher.png" style="opacity: 0.2;" />
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3;"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <img src="Content/Image/FigmaProjectIcons/Document.png" style="opacity: 0.2;" />
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3;"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <i class="fa fa-circle text-black-50" style="opacity: 0.3; font-size: 6px"></i>
            <img src="Content/Image/FigmaProjectIcons/LikeToTeach.png" style="opacity: 0.2;" />
        </div>
    </header>

    <section class="radius1rem shadow d-felx justify-content-center w-50 mx-auto m-4 p-3">
        <div>
            <h5 class="text-secondary">اطلاعات شخصی </h5>
            <hr class="hr-leftFade" />
        </div>

        <form class="m-1 fontSmall12" id="form">
            <div class="row p-0 mb-2">
                <div class="col-md-5">
                    <div class="form-group row">
                        <label for="firstName" class="col-md-4 col-form-label">نام:</label>
                        <div class="col-md-8 p-0">
                            <input type="text" class="form-control form-control-sm rounded-lg" id="firstName" name="FirstName">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="lastName" class="col-md-4 col-form-label">نام خانوادگی:</label>
                        <div class="col-md-8 p-0">
                            <input type="text" class="form-control form-control-sm rounded-lg" id="lastName" name="LastName">
                        </div>
                    </div>

                    <fieldset class="form-group row">
                        <div class="row col-md-12">
                            <legend class="col-form-label col-md-5 pt-0">جنسیت:</legend>
                            <div class="form-check form-check-inline col-md-2">
                                <input class="form-check-input" type="radio" name="Gender" id="femaleCheckBox" value="0">
                                <label class="form-check-label" for="femaleCheckBox">خانم</label>
                            </div>
                            <div class="form-check form-check-inline col-md-2">
                                <input class="form-check-input" type="radio" name="Gender" id="maleCheckBox" value="1">
                                <label class="form-check-label" for="maleCheckBox">آقا</label>
                            </div>

                        </div>
                    </fieldset>

                    <div class="form-group row">
                        <label for="nationalCode" class="col-md-4 col-form-label">کد ملی:</label>
                        <div class="col-md-8 p-0">
                            <input type="text" class="form-control form-control-sm rounded-lg" id="nationalCode" name="NationalCode">
                        </div>
                    </div>
                    <div class="form-group row">

                        <label for="birthdate" class="col-md-4 col-form-label">تاریخ تولد:</label>
                        <div class="col-md-8 p-0">
                            <input class="form-control form-control-sm rounded-lg" type="date" value="" id="birthdate" name="Birthdate">
                        </div>


                    </div>
                    <div class="form-group row">
                        <label for="birthdatePlace" class="col-md-4 col-form-label">محل تولد:</label>
                        <div class="col-md-8 p-0">
                            <select class="form-control form-control-sm rounded-lg" id="birthdatePlace" name="BirthPlaceID">
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="religion" class="col-md-4 col-form-label">دین:</label>
                        <div class="col-md-8 p-0">
                            <select class="form-control form-control-sm rounded-lg" id="religion" name="ReligionID">
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <!--<label for="maritalStatus" class="col-md-4 col-form-label">وضعیت تاهل:</label>-->
                        <legend class="col-form-label col-md-5 pt-0">وضعیت تاهل:</legend>
                        <div class="form-check form-check-inline col-md-2">
                            <input class="form-check-input" type="radio" name="MaritalStatus" id="maritalStatusSingle" value="false">
                            <label class="form-check-label" for="maritalStatusSingle">مجرد</label>
                        </div>
                        <div class="form-check form-check-inline col-md-2">
                            <input class="form-check-input" type="radio" name="MaritalStatus" id="maritalStatusmarried" value="true">
                            <label class="form-check-label" for="maritalStatusmarried">متاهل</label>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="childNumber" class="col-md-4 col-form-label small">تعداد فرزندان:</label>
                        <div class="col-md-8 p-0">
                            <input type="number" class="form-control form-control-sm rounded-lg" id="childNumber" name="ChildNumber">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="Nationality" class="col-md-4 col-form-label">ملیت:</label>
                        <div class="col-md-8 p-0">
                            <select class="form-control form-control-sm rounded-lg" id="Nationality" name="CountryID">
                            </select>
                        </div>
                    </div>

                </div>

                <div class="col-md-6 border-right mr-4">
                    <div class="form-group row">
                        <div class="col-md-12 mb-2">
                            <img name="PicFileContent" id="userPic" src="Content/Image/FigmaProjectIcons/17241-200.png" class="shadow-sm img-thumbnail float-left h-100 w-50 mr-5" style="opacity: 0.5" />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-form-label col-md-4" for="phoneNumber">شماره تماس:</label>
                        <div class="col-md-8">
                            <a class="btn SematecTextYellow btn-sm sematecBgBlue w-100 rounded10" id="phoneNumber">افزودن <i class="fa fa-plus"></i></a>
                        </div>
                        <div id="phoneNumberInfo">
                            <table id="phoneNumberTable">
                            </table>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-form-label col-md-4" for="Email">ایمیل:</label>
                        <div class="col-md-8">
                            <a class="btn SematecTextYellow btn-sm sematecBgBlue w-100 rounded10" id="Email">افزودن <i class="fa fa-plus"></i></a>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-form-label col-md-4" for="Address">آدرس:</label>
                        <div class="col-md-8">
                            <a class="btn SematecTextYellow btn-sm sematecBgBlue w-100 rounded10" id="Address">افزودن <i class="fa fa-plus"></i></a>
                        </div>
                    </div>


                    <div class="form-group row">
                        <label class="col-form-label col-md-4">فایل رزومه:</label>
                        <input type="file" class="col-md-8" id="resume">
                    </div>



                    <div class="form-group row">
                        <label class="col-form-label col-md-4">نام کاربر:</label>
                        <div class="col-md-8">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <i class="fa fa-user input-group-text"></i>
                                </div>
                                <input type="text" id="userName" class="form-control form-control-sm" placeholder="" aria-label="" aria-describedby="basic-addon1" name="Username">
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-form-label col-md-4">کلمه عبور:</label>
                        <div class="col-md-8">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <i class="fa fa-key input-group-text pl-2"></i>
                                </div>
                                <input type="password" id="password" class="form-control form-control-sm" placeholder="" aria-label="" aria-describedby="basic-addon1" name="Password">
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row  d-flex justify-content-md-between" id="btnParent">
                <div class="col-md-2">
                    <button id="prevButton" class="btn btn-sm SematecTextYellow sematecBgBlue fontSmall12"><i class="fa fa-arrow-circle-o-right text-warning"></i>مرحله قبل </button>
                </div>
                <div class="col-md-2">
                    <button id="nextButton" class="btn btn-sm SematecTextYellow sematecBgBlue fontSmall12">مرحله بعد <i class="fa fa-arrow-circle-o-left text-warning"></i></button>
                </div>
            </div>



        </form>
    </section>
    <div class="list-group position-absolute d-none w-50" id="picContextMenu">
        <a href="#" class="list-group-item list-group-item-action active fontSmall12">امکانات
        </a>
        <a href="#" class="list-group-item list-group-item-action fontSmall12">
            <input type="file" class="contextFile" id="personimg" />
            <i class="fa fa-plus"></i>عکس جدید</a>
        <a href="#" class="list-group-item list-group-item-action fontSmall12"><i class="fa fa-trash"></i>حذف عکس</a>
    </div>

    <div class="modal" id="myModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalHeader"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">

                    <form class="p-3" id="modalForm">
                        <div class="form-group row">
                            <label for="modalType" class="col-md-4 col-form-label"></label>
                            <div class="col-md-8 p-0">
                                <select class="form-control form-control-sm rounded-lg" id="modalType">
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="modalContent" class="col-md-4 col-form-label"></label>
                            <div class="col-md-8 p-0">
                                <input type="text" class="form-control form-control-sm rounded-lg" id="modalContent">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="cityAddress" class="col-md-4 col-form-label"></label>
                            <div class="col-md-8 p-0" id="cityAddressDiv">
                                <!--<select class="form-control form-control-sm rounded-lg" id="cityAddress">
                                </select>-->
                            </div>
                        </div>

                    </form>
                    <table class="table table-hover table-sm" id="modalTable">
                        <thead class="thead-dark">
                            <tr>
                                <th>لیست موارد</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">انصراف</button>
                    <button type="button" class="btn btn-primary" id="modalSave">ثبت</button>
                    <button type="button" class="btn btn-danger" id="modaldelete">حذف همه</button>
                </div>
            </div>
        </div>
    </div>
    <div id="test">
    </div>
</body>
<script type="text/javascript">
    //debugger;
    var personID;
    var acceptableImageTypes = ['image/png', 'image/bmp', 'image/jpeg', 'image/gif'];
    var phoneTypeList;
    var emailTypeList;
    var addressTypeList;
    var ResumeContent;
    var ResumeFileName;
    var PicFileContent;
    var PicFileName;
    var personPhones = [];
    var personAddresses = [];
    var personEmails = [];
    var person;
    debugger;

    //------------Get bare json person model from server

    $.get('http://localhost:60404/RegistrationService.svc/CreatePerson', function (data) {
        debugger;
        person = $(data)[0];
    }).done(function () {
        var queryString = decodeURIComponent(window.location.search);

        if (queryString != "") {
            queryString = queryString.substring(1);
            var queries = queryString.split("&");
            for (var i = 0; i < queries.length; i++) {
                person.ID = queries[i];
                $.get("http://localhost:60404/RegistrationService.svc/GetPersonByID", { id: queries[i] })
                    .done(function (data) {
                        debugger;

                        $('#firstName').val(data.GetPersonByIDResult.FirstName);
                        $('#lastName').val(data.GetPersonByIDResult.LastName);
                        $('#nationalCode').val(data.GetPersonByIDResult.NationalCode);
                        if (data.GetPersonByIDResult.Gender == 0) {
                            $('#femaleCheckBox').prop('checked', true);
                        } else {
                            $('#maleCheckBox').prop('checked', true);
                        }
                        $('#birthdate').val(data.GetPersonByIDResult.BirthDate);
                        $('#birthdatePlace').val(data.GetPersonByIDResult.BirthPlaceID);

                        $('#religion').val(data.GetPersonByIDResult.ReligionID);
                        if (data.GetPersonByIDResult.MaritalStatus == false) {
                            $('#maritalStatusSingle').prop('checked', true);
                        } else {
                            $('#maritalStatusmarried').prop('checked', true);
                        }
                        $('#childNumber').val(data.GetPersonByIDResult.ChildNumber);
                        $('#Nationality').val(data.GetPersonByIDResult.CountryID);
                        $('#userPic').attr('src', data.GetPersonByIDResult.PicFileContent);
                        PicFileContent = data.GetPersonByIDResult.PicFileContent;
                        PicFileName = data.GetPersonByIDResult.PicFileName;
                        $('#password').val(data.GetPersonByIDResult.Password);
                        $('#userName').val(data.GetPersonByIDResult.Username);
                        ResumeContent = data.GetPersonByIDResult.ResumeContent;
                        ResumeFileName = data.GetPersonByIDResult.ResumeFileName;

                    });


            }
        }
    });



    function personPhone(typeID, number) {
        this.ID = 0,
            this.PhoneTypeID = typeID,
            this.Number = number;
    };
    function personEmail(typeID, email) {
        this.ID = 0,
            this.EmailTypeID = typeID,
            this.Name = email;
    };
    function personAddress(typeID, address, cityID) {
        this.ID = 0,
            this.AddressTypeID = typeID,
            this.Location = address,
            this.CityID = cityID
    };




    var pic = document.getElementById('userPic');
    pic.addEventListener('contextmenu', function (e) {
        e.preventDefault();

        var picContextMenu = document.getElementById('picContextMenu');
        picContextMenu.style.left = e.clientX + "px";
        picContextMenu.style.top = e.clientY + "px";
        picContextMenu.setAttribute('class', 'list-group position-absolute');
    }, false);


    document.addEventListener('click', function (e) {
        document.getElementById('picContextMenu').setAttribute('class', 'list-group position-absolute d-none width300');
    }, false);

    $('#myModal').modal({
        keyboard: false,
        show: false
    });

    $("#phoneNumber,#Email,#Address").click(function (e) {
        debugger;
        $('#modalType').text(' ');
        $("label[for='" + $('#cityAddress').attr('id') + "']").text(' ');
        $('#cityAddressDiv').text(' ');
        $('#modalContent').val(' ');
        $('#modalTable').find('tbody').text(' ');
        var type = $("label[for='" + $(this).attr('id') + "']").text();
        $('#modalHeader').text(type);
        $("label[for='" + $('#modalType').attr('id') + "']").text('نوع' + ' ' + type);
        $("label[for='" + $('#modalContent').attr('id') + "']").text(type);
        if (this.id == "phoneNumber") {
            phoneTypeList.forEach(function (e) {
                $('#modalType').append($('<Option />').val(e.ID).text(e.Name));
            });
            personPhones.forEach(function (e) {
                debugger;
                $('#modalTable').find('tbody').append(
                    $('<tr/>').append($('<td/>').text(e.Number))
                );
            });


        };
        if (this.id == "Email") {
            emailTypeList.forEach(function (e) {
                $('#modalType').append($('<Option />').val(e.ID).text(e.Name));
            });
            personEmails.forEach(function (e) {

                $('#modalTable').find('tbody').append(
                    $('<tr/>').append($('<td/>').text(e.Name))
                );
            });




        };
        if (this.id == "Address") {
            addressTypeList.forEach(function (e) {
                $('#modalType').append($('<Option />').val(e.ID).text(e.Name));
            });

            $('#cityAddressDiv').append($('<select/>').addClass("form-control form-control-sm rounded-lg").attr('id', 'cityAddress'));
            $("label[for='" + $('#cityAddress').attr('id') + "']").text('شهر محل سکونت:');
            $.get('http://localhost:60404/RegistrationService.svc/GetAllCity', function (data) {
                debugger;
                data.forEach(function (e) {
                    $('#cityAddress').append($('<Option />').val(e.ID).text(e.Name));
                });
            }).fail(function () {
                $('#cityAddress').HTML(' ');
            });
            personAddresses.forEach(function (e) {
                $('#modalTable').find('tbody').append(
                    $('<tr/>').append($('<td/>').text(e.Location))
                );
            });


        };

        $('#myModal').modal('show');




    });

    $('#modalSave').click(function (event) {

        if ($('#modalHeader').text() == "شماره تماس:") {
            personPhones.push(new personPhone(($('#modalType').val()), ($('#modalContent').val())));

            $('#myModal').modal('hide');
        };

        if ($('#modalHeader').text() == "ایمیل:") {
            personEmails.push(new personEmail(($('#modalType').val()), ($('#modalContent').val())));
            $('#myModal').modal('hide');
        };
        if ($('#modalHeader').text() == "آدرس:") {
            personAddresses.push(new personAddress(($('#modalType').val()), ($('#modalContent').val()), ($('#cityAddress').val())));
            $('#myModal').modal('hide');
        };



    });

    $('#modaldelete').click(function (e) {
        debugger;

        if ($('#modalHeader').text() == "شماره تماس:") {
            var num = personPhones.length;
            for (var i = 0; i < num; i++) {
                personPhones.pop();
            }

        };

        if ($('#modalHeader').text() == "ایمیل:") {
            var num = personEmails.length;
            for (var i = 0; i < num; i++) {
                personEmails.pop();
            }
        };
        if ($('#modalHeader').text() == "آدرس:") {
            var num = personAddresses.length;
            for (var i = 0; i < personAddresses.length; i++) {
                personAddresses.pop();
            }
        };

        $('#myModal').modal('hide');
    });


    $.get('http://localhost:60404/RegistrationService.svc/GetAllCity', function (data) {

        data.forEach(function (e) {
            $('#birthdatePlace').append($('<Option />').val(e.ID).text(e.Name));
        });
    }).fail(function () {
        $('#birthdatePlace').HTML(' ');
    });

    $.get('http://localhost:60404/RegistrationService.svc/GetAllReligion', function (data) {

        data.forEach(function (e) {
            $('#religion').append($('<Option />').val(e.ID).text(e.Name));
        });
    }).fail(function () {
        $('#religion').HTML(' ');
    });
    $.get('http://localhost:60404/RegistrationService.svc/GetAllCountry', function (data) {

        data.forEach(function (e) {
            $('#Nationality').append($('<Option />').val(e.ID).text(e.Name));
        });
    }).fail(function () {
        $('#Nationality').HTML(' ');
    });


    $.get('http://localhost:60404/RegistrationService.svc/GetAllPhoneType', function (data) {


        phoneTypeList = data;
    });
    $.get('http://localhost:60404/RegistrationService.svc/GetAllEmailType', function (data) {

        emailTypeList = data;
    });
    $.get('http://localhost:60404/RegistrationService.svc/GetAllAddressType', function (data) {

        addressTypeList = data;
    });

    document.getElementById('personimg').onchange = function (evt) {
        debugger;
        var tgt = evt.target;
        var files = tgt.files;

        if (files.length == 0) {
            return;
        }

        if (acceptableImageTypes.indexOf(tgt.files[0].type) < 0) {
            return;
        }

        PicFileName = tgt.files[0].name;
        var fr = new FileReader();
        fr.onload = function () {
            debugger;
            document.getElementById('userPic').src = fr.result;
            PicFileContent = fr.result;

        }
        fr.readAsDataURL(files[0]);




    }

    $('#resume').on('change', function (evt) {
        debugger;
        var tgt = evt.target;
        var files = tgt.files;
        ResumeFileName = tgt.files[0].name;
        if (files.length == 0) {
            return;
        }
        var fileReader = new FileReader();
        fileReader.onload = function () {
            ResumeContent = fileReader.result;
        };
        fileReader.readAsDataURL($('#resume').prop('files')[0]);
    });
    //-----------------------------------------------PrevButtonEvent------------------------
    $('#prevButton').click(function (e) {
        debugger;
        e.preventDefault();
        e.stopPropagation();
        location = '/Login.html';
    });

    //-----------------------------------------------Click Next Button Operations------------------------

    $('#nextButton').click(function (e) {
        debugger;
        var error = 0;
        e.preventDefault();

        person.FirstName = $('#firstName').val();
        person.LastName = $('#lastName').val();
        if ($('#femaleCheckBox').prop('checked') == true) {
            person.Gender = 0;
        } else {
            person.Gender = 1;
        }
        person.NationalCode = $('#nationalCode').val();
        person.BirthDate = $('#birthdate').val();
        person.BirthPlaceID = $('#birthdatePlace').val();
        person.ReligionID = $('#religion').val();
        if ($('#maritalStatusSingle').prop('checked') == true) {
            person.MaritalStatus = false;
        } else {
            person.MaritalStatus = true;
        }
        if ($('#childNumber').val() == "") {
            person.ChildNumber = 0;
        } else {
            person.ChildNumber = $('#childNumber').val();
        }
        person.CountryID = $('#Nationality').val();
        if (PicFileContent != undefined) {
            person.PicFileContent = PicFileContent;
        } else {
            person.PicFileContent = null;
        }
        if (ResumeContent != undefined) {
            person.ResumeContent = ResumeContent;
        } else {
            person.ResumeContent = null;
        }
        if (PicFileName != undefined) {
            person.PicFileName = PicFileName;
        } else {
            person.PicFileName = null;
        }
        if (ResumeFileName != undefined) {
            person.ResumeFileName = ResumeFileName;
        } else {
            person.ResumeFileName = null;
        }
        person.Password = $('#password').val();
        person.Username = $('#userName').val();

        //------------------------------Save Or Edit Person
        if (person.ID == 0) {
            $.ajax({
                type: "POST",
                url: "http://localhost:60404/RegistrationService.svc/SavePerson",
                data: JSON.stringify({ person: person }),
                contentType: "application/json",
                dataType: "json",
                error: function (jqXHR, textStatus, errorMessage) {
                    debugger;
                    console.log(jqXHR + '     ' + textStatus + '    ' + errorMessage);
                    alert("درخواست شما موفقیت آمیز نبود");
                    error += 1;
                    return;

                },
                success: function (data) {
                    debugger;
                    console.log(data)
                    if (data.SavePersonResult[0].ErrorMessage.length != 0) {
                        data.SavePersonResult.forEach(function (e) {
                            alert(e.ErrorMessage)

                        });
                        return;
                    }


                    //----------------getPersonID------------------
                    $.ajax({
                        type: "POST",
                        url: "http://localhost:60404/RegistrationService.svc/GetPersonID",
                        data: JSON.stringify({ username: person.Username }),
                        contentType: "application/json",
                        error: function (jqXHR, textStatus, errorMessage) {
                            debugger;
                            console.log(jqXHR + '     ' + textStatus + '    ' + errorMessage);
                            alert("درخواست شما موفقیت آمیز نبود");
                            error += 1;
                            return;

                        }, success: function (data) {
                            debugger;
                            person.ID = data.GetPersonIDResult;
                            if (person.ID == 0) {
                                alert("درخواست شما موفقیت آمیز نبود");
                                error += 1;
                                return;
                            }
                            //--------------------------------------------savephones
                            $.ajax({
                                type: "POST",
                                url: "http://localhost:60404/RegistrationService.svc/SubmitPhones",
                                data: JSON.stringify({ phones: personPhones, personID: person.ID }),
                                contentType: "application/json",
                                dataType: "json",
                                error: function (jqXHR, textStatus, errorMessage) {
                                    debugger;
                                    console.log(jqXHR + '     ' + textStatus + '    ' + errorMessage);
                                    alert("درخواست شما موفقیت آمیز نبود");
                                    error += 1;
                                    return;

                                },
                                success: function (data) {
                                    debugger;
                                    console.log(data)
                                    //-------------------------------------------saveEmails
                                    $.ajax({
                                        type: "POST",
                                        url: "http://localhost:60404/RegistrationService.svc/SubmitEmails",
                                        data: JSON.stringify({ Emails: personEmails, personID: person.ID }),
                                        contentType: "application/json",
                                        dataType: "json",
                                        error: function (jqXHR, textStatus, errorMessage) {
                                            debugger;
                                            console.log(jqXHR + '     ' + textStatus + '    ' + errorMessage);
                                            alert("درخواست شما موفقیت آمیز نبود");
                                            error += 1;
                                            return;

                                        },
                                        success: function (data) {
                                            debugger;
                                            console.log(data)
                                            //------------------------------------------saveAddresses
                                            $.ajax({
                                                type: "POST",
                                                url: "http://localhost:60404/RegistrationService.svc/SubmitAddresses",
                                                data: JSON.stringify({ Addresses: personAddresses, personID: person.ID }),
                                                contentType: "application/json",
                                                dataType: "json",
                                                error: function (jqXHR, textStatus, errorMessage) {
                                                    debugger;
                                                    console.log(jqXHR + '     ' + textStatus + '    ' + errorMessage);
                                                    alert("درخواست شما موفقیت آمیز نبود");
                                                    error += 1;
                                                    return;

                                                },
                                                success: function (data) {
                                                    console.log(data)
                                                    if (error == 0) {
                                                        location = '/EducationalExperience.html?' + person.ID;

                                                    }
                                                }

                                            });
                                        }

                                    });
                                }

                            });
                        }

                    });

                }
            });

        } else {
            $.ajax({
                type: "POST",
                url: "http://localhost:60404/RegistrationService.svc/EditPerson",
                data: JSON.stringify({ person: person }),
                contentType: "application/json",
                dataType: "json",
                error: function (jqXHR, textStatus, errorMessage) {
                    debugger;
                    console.log(jqXHR + '     ' + textStatus + '    ' + errorMessage);
                    alert("درخواست شما موفقیت آمیز نبود");
                    error += 1;
                    return;

                },
                success: function (data) {
                    debugger;
                    console.log(data)
                    //--------------------------------------------savephones
                    if (personPhones != null) {
                        $.ajax({
                            type: "POST",
                            url: "http://localhost:60404/RegistrationService.svc/SubmitPhones",
                            data: JSON.stringify({ phones: personPhones, personID: person.ID }),
                            contentType: "application/json",
                            dataType: "json",
                            error: function (jqXHR, textStatus, errorMessage) {
                                debugger;
                                console.log(jqXHR + '     ' + textStatus + '    ' + errorMessage);
                                alert("درخواست شما موفقیت آمیز نبود");
                                error += 1;
                                return;

                            },
                            success: function (data) {
                                console.log(data)
                            }

                        });
                    }

                    //-------------------------------------------saveEmails
                    if (personEmails != null) {
                        $.ajax({
                            type: "POST",
                            url: "http://localhost:60404/RegistrationService.svc/SubmitEmails",
                            data: JSON.stringify({ Emails: personEmails, personID: person.ID }),
                            contentType: "application/json",
                            dataType: "json",
                            error: function (jqXHR, textStatus, errorMessage) {
                                debugger;
                                console.log(jqXHR + '     ' + textStatus + '    ' + errorMessage);
                                alert("درخواست شما موفقیت آمیز نبود");
                                error += 1;
                                return;

                            },
                            success: function (data) {
                                console.log(data)
                            }

                        });
                    }

                    //------------------------------------------saveAddresses
                    if (personAddresses != null) {
                        $.ajax({
                            type: "POST",
                            url: "http://localhost:60404/RegistrationService.svc/SubmitAddresses",
                            data: JSON.stringify({ Addresses: personAddresses, personID: person.ID }),
                            contentType: "application/json",
                            dataType: "json",
                            error: function (jqXHR, textStatus, errorMessage) {
                                debugger;
                                console.log(jqXHR + '     ' + textStatus + '    ' + errorMessage);
                                alert("درخواست شما موفقیت آمیز نبود");
                                error += 1;
                                return;

                            },
                            success: function (data) {
                                console.log(data);
                                if (error == 0) {
                                    location = '/EducationalExperience.html?' + person.ID;

                                }
                            }

                        });
                    }


                }
            });

        }



    });


</script>



</html>
